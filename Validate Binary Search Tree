import java.util.*;

public class Solution {
	TreeNode preNode = null;

	public boolean isValidBST(TreeNode root) {
		return dfs(root);
	}

	boolean dfs(TreeNode root) {
		if (root == null)
			return true;
		TreeNode left = root.left;
		if (!dfs(left))
			return false;

		if (preNode != null && preNode.val >= root.val)
			return false;
		preNode = root;

		TreeNode right = root.right;
		if (!dfs(right))
			return false;
		return true;
	}
}
